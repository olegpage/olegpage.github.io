
<!DOCTYPE html>
<html>
<head>
    <title>WebRTC: Демонстрация фотосъемки</title>
    <meta charset='utf-8'>
  
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
<video autoplay></video>
<form><input type='button' id='snapshot' value="snapshot"></form> 
  
<canvas id='canvas' width='100' height='100'></canvas> 
  
<script> 
  document.getElementById('snapshot').onclick = function() { 
    var video = document.querySelector('video'); 
    var canvas = document.getElementById('canvas'); 
    var ctx = canvas.getContext('2d'); 
    ctx.drawImage(video,0,0); 
  } 
</script>
    <script>
    if(navigator.webkitGetUserMedia!=null) { 
  var options = { 
    video:true, 
    audio:true 
  }; 
  
  // запрашиваем доступ к веб-камере
  navigator.webkitGetUserMedia(options, 
    function(stream) { 
      // получаем тег video
      var video = document.querySelector('video'); 
      // включаем поток в магический URL
      video.src = window.webkitURL.createObjectURL(stream); 
    }, 
    function(e) { 
      console.log("error happened"); 
    } 
  ); 
}
    </script>
</body>
</html>
